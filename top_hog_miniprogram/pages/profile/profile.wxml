<!-- 我的页面 -->
<view class="container">
  <!-- 顶部标题 -->
  <view class="header">
    <view class="header-left">
    </view>
    <text class="logout-btn" bindtap="handleLogout">退出登录</text>
  </view>

  <!-- 背景图 -->
  <view class="bg-image">
    <image class="bg-img" src="/images/profile-bg.jpg" mode="aspectFill"></image>
    <view class="bg-overlay"></view>
  </view>

  <scroll-view scroll-y class="content">
    <!-- 头像卡片 -->
    <view class="avatar-card">
      <view class="avatar-section">
        <view class="avatar-wrapper">
          <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
          <view class="wechat-badge">微信</view>
        </view>
        <view class="user-info-section">
          <view class="user-header">
            <text class="user-name">{{userInfo.nickname || '谁是猪头王玩家'}}</text>
            <text class="edit-btn" bindtap="handleEdit">编辑资料</text>
          </view>
          <text class="user-desc">注册 {{registerDays}} 天 · 累计 {{totalGames}} 局</text>
          <view class="stats-grid">
            <view class="stat-item">
              <text class="stat-label">胜率</text>
              <text class="stat-value win-rate">{{winRate}}%</text>
            </view>
            <view class="stat-item">
              <text class="stat-label">平均猪头</text>
              <text class="stat-value avg-score">{{avgScore}}</text>
            </view>
            <view class="stat-item">
              <text class="stat-label">最高连胜</text>
              <text class="stat-value max-streak">{{maxStreak}} 局</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- 战绩概览 -->
    <view class="stats-card">
      <view class="card-header">
        <text class="card-title">最近 10 局表现</text>
        <text class="view-all-btn" bindtap="handleViewAll">查看全部</text>
      </view>
      <view class="result-legend">
        <text class="legend-item win">胜</text>
        <text class="legend-item draw">平</text>
        <text class="legend-item lose">负</text>
      </view>
      <view class="result-dots">
        <view class="result-dot {{item}}" wx:for="{{recentResults}}" wx:key="index"></view>
      </view>
      <text class="result-summary">最近 10 局：<text class="win-text">{{winCount}} 胜</text> · <text class="draw-text">{{drawCount}} 平</text> · <text class="lose-text">{{loseCount}} 负</text></text>
    </view>

    <!-- 详细统计 -->
    <view class="detail-stats-card">
      <view class="detail-item">
        <text>累计对局</text>
        <text class="detail-value">{{totalGames}} 局</text>
      </view>
      <view class="detail-item">
        <text>吃猪最多的一局</text>
        <text class="detail-value max-bull">{{maxBullScore}} 猪 ·「吃猪大王」</text>
      </view>
      <view class="detail-item">
        <text>躲猪最成功的一局</text>
        <text class="detail-value min-bull">{{minBullScore}} 猪 ·「避雷针」</text>
      </view>
      <view class="detail-item">
        <text>常用对手</text>
        <text class="detail-value">{{commonOpponents}}</text>
      </view>
    </view>

    <!-- 设置与反馈 -->
    <view class="settings-card">
      <view class="setting-item">
        <view class="setting-left">
          <text class="setting-icon">🔔</text>
          <text>开局 & 结算通知</text>
        </view>
        <text class="setting-status">已开启</text>
      </view>
      <view class="setting-item" bindtap="handleFeedback">
        <view class="setting-left">
          <text class="setting-icon">💬</text>
          <text>意见反馈</text>
        </view>
        <text class="setting-arrow">›</text>
      </view>
      <view class="setting-item" bindtap="handlePrivacy">
        <view class="setting-left">
          <text class="setting-icon">🛡️</text>
          <text>隐私与安全</text>
        </view>
        <text class="setting-arrow">›</text>
      </view>
      <view class="setting-item">
        <view class="setting-left">
          <text class="setting-icon">ℹ️</text>
          <text>关于 谁是猪头王</text>
        </view>
        <text class="setting-version">v0.1 原型</text>
      </view>
    </view>
  </scroll-view>
</view>

